# Contributor: Edd Salkield <edd@salkield.uk>
# Maintainer: Edd Salkield <edd@salkield.uk>
pkgname=h4h5tools
pkgver=2.2.5
pkgrel=0
pkgdesc="Conversion utilities between hdf4 and hdf5"
url="https://support.hdfgroup.org/products/hdf5_tools/h4toh5/"
arch="all"
license="custom"
options="!check"	# Upstream tests appear broken
depends_dev="hdf4-dev hdf5-dev zlib-dev portablexdr-dev jpeg-dev"
makedepends="$depends-dev"
subpackages="$pkgname-dev $pkgname-doc"
source="https://support.hdfgroup.org/ftp/HDF5/releases/h4toh5/h4toh5-"$pkgver"/src/h4h5tools-"$pkgver".tar.gz"

build() {
	export LIBS="$LIBS -ldf -lmfhdf -lz -lportablexdr -ljpeg"
	./configure --prefix=/usr
	make
}

check() {
	make check
}

package() {
	make DESTDIR="$pkgdir" install
	install -Dm644 COPYING "$pkgdir"/usr/share/licenses/"$pkgname"/COPYING
}

sha512sums="
1749c5d4383695296fcc79dc900c2d04be267f01cfb006be8fd0f4baf0e6d51a04d788c76881fedba3d06ad2bf440a0dbceeb98d8b02b5ceade520900a726d40  h4h5tools-2.2.5.tar.gz
"
