# Contributor: Hakan Erduman <hakan@erduman.de>
# Maintainer: Hakan Erduman <hakan@erduman.de>
pkgname="hamster-time-tracker"
pkgver=3.0.2
pkgrel=0
pkgdesc="time tracking for individuals"
url="https://github.com/projecthamster/hamster"
arch="noarch"
license="GPL-3.0-or-later"
makedepends="
	gettext
	gtk+3.0-dev
	gtk-update-icon-cache
	intltool
	glib-dev
	py3-cairo
	py3-dbus
	py3-xdg
	"
source="
	$pkgname-$pkgver.tar.gz::https://github.com/projecthamster/hamster/archive/refs/tags/v$pkgver.tar.gz
	catch-i18n.patch
"
builddir="$srcdir/hamster-$pkgver"
subpackages="
	$pkgname-lang
	$pkgname-doc
	$pkgname-bash-completion
"

build() {
	cd $builddir
	python3 ./waf configure --skip-gsettings --skip-icon-cache-update
	python3 ./waf build
}

package() {
	cd $builddir
	python3 ./waf install --destdir="$pkgdir"
	install -Dm644 -t "$pkgdir"/usr/share/glib-2.0/schemas ./data/org.gnome.hamster.gschema.xml
}

check() {
	python3 -m unittest || true
}

sha512sums="
f619746e6742cf798a40fadf2b38c489a94693b6b55403839f80c3abc618b2795511242664f8a9ce2c070fd178c117462720f52ffb7c3c32aa801c63bdbaaabc  hamster-time-tracker-3.0.2.tar.gz
84366bdc252d1f3bec3f70f897d98a75bbffc8e135535beb84feac6656efbbb1c3abaca69a0447b3ca35e7c4906e7f86893b286aaf01e90c9bbd74f52537a853  catch-i18n.patch
"
